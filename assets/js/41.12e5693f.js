(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{326:function(s,t,a){"use strict";a.r(t);var e=a(14),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"politica-de-seguridad"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#politica-de-seguridad"}},[s._v("#")]),s._v(" Politica de Seguridad")]),s._v(" "),t("p",[s._v("ES4X te permite que ejecutes tus aplicacoines en un sandbox totalmente seguro. Igual que "),t("a",{attrs:{href:"https://deno.land/",target:"_blank",rel:"noopener noreferrer"}},[s._v("deno"),t("OutboundLink")],1),s._v(", ES4X puede\naislar tu aplicacion. La tecnologia que permite esto es el "),t("a",{attrs:{href:"https://docs.oracle.com/javase/tutorial/essential/environment/security.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("security manager"),t("OutboundLink")],1),s._v(" de JVM.\nLos managers de seguridad fueron los que aislaban el antiguo codigo "),t("code",[s._v("Applet")]),s._v(" de la maquina anfitriona. Son mas precisos que lo\nque te permite "),t("code",[s._v("deno")]),s._v(" a dia de hoy.")]),s._v(" "),t("h2",{attrs:{id:"crea-un-security-policy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#crea-un-security-policy"}},[s._v("#")]),s._v(" Crea un security.policy")]),s._v(" "),t("p",[s._v("Para crear una politica de segurida, ejecuta la herramienta "),t("code",[s._v("es4x")]),s._v(":")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ es4x security-policy\n\nCreating a new "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'security.policy'")]),s._v(" with full network access and\nread-only IO access to the working directory.\n")])])]),t("p",[s._v("El archivo generado es una plantilla simple, si lo abres lo puedes leer:")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Grant the following permissions to code that shall be executed from")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// the node_modules/.lib/* directory")]),s._v("\ngrant codeBase "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"file:\\${user.dir}\\${/}node_modules\\${/}.lib\\${/}*"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// vert.x will need full access to the temp dir.")]),s._v("\n  permission java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("io"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("FilePermission "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\\${java.io.tmpdir}\\${/}-"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"read,write,delete"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// the code should be able to read the JVM/GraalVM runtime libs")]),s._v("\n  permission java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("io"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("FilePermission "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\\${java.home}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"read"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  permission java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("io"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("FilePermission "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\\${java.home}\\${/}..\\${/}release"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"read"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  permission java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("io"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("FilePermission "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\\${java.home}\\${/}-"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"read"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// applications are allowed to read all files from the CWD")]),s._v("\n  permission java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("io"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("FilePermission "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\\${user.dir}\\${/}-"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"read"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// uncomment the following to allow full read access")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//permission java.io.FilePermission "<<ALL FILES>>", "read";')]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Netty performs some reflection we need to allow it")]),s._v("\n  permission java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("reflect"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ReflectPermission "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"suppressAccessChecks"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// By default we allow all runtime permissions")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// users may want to restrict this further say for example to")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// deny access to environment variables, etc...")]),s._v("\n  permission java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("RuntimePermission "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ES4X setup a nice looking logger")]),s._v("\n  permission java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("util"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("logging"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("LoggingPermission "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"control"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Allow full access to JVM system properties")]),s._v("\n  permission java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("util"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("PropertyPermission "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"read,write"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// currently we allow all access to the network")]),s._v("\n  permission java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("net"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SocketPermission "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"accept,connect,listen,resolve"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("Esta plantilla permite acceso total a la red y solo lectura a todos los archivos desde "),t("code",[s._v("CWD")]),s._v(" donde se inicia la aplicacion.")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("Una vez que conozcas todos los permisos que necesita tu aplicacion puedes comenzar a restringirlos incluso mas!")])]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("Aunque esta plantilla parece buena para comenzar, recuerda que el "),t("code",[s._v("CWD")]),s._v(" es de solo lectura, asi que si por ejemplo\nestas ejecutando un servidor http que escribe uploads, a menos que estos uploads vayan al directorio "),t("code",[s._v("$TEMP")]),s._v(", van\na fallar porque la aplicacion no tiene persmisos para escribir.")])])])}),[],!1,null,null,null);t.default=n.exports}}]);