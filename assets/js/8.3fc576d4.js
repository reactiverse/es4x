(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{208:function(t,e,s){t.exports=s.p+"assets/img/hawtio-connect.3d2e1936.png"},209:function(t,e,s){t.exports=s.p+"assets/img/hawtio-jmx.b1049635.png"},293:function(t,e,s){"use strict";s.r(e);var a=s(28),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("This project implements the Vert.x Metrics Service Provider Interface\n(SPI) reporting metrics to the "),a("a",{attrs:{href:"https://github.com/dropwizard/metrics",target:"_blank",rel:"noopener noreferrer"}},[t._v("Dropwizard\nmetrics"),a("OutboundLink")],1),t._v(" library.")]),t._v(" "),a("h1",{attrs:{id:"features"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#features"}},[t._v("#")]),t._v(" Features")]),t._v(" "),a("p",[t._v("A fairly simple API to retrieve metrics via the "),a("code",[t._v("Measured")]),t._v(" interface\nwhich is implemented by various Vert.x components like "),a("code",[t._v("HttpServer")]),t._v(",\n"),a("code",[t._v("NetServer")]),t._v(", and even "),a("code",[t._v("Vertx")]),t._v(" itself.")]),t._v(" "),a("p",[t._v("Configurable JMX reporting based on Dropwizard implementation, exposing\nVert.x as JMX MBeans.")]),t._v(" "),a("h1",{attrs:{id:"getting-started"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getting-started"}},[t._v("#")]),t._v(" Getting started")]),t._v(" "),a("p",[t._v("To enable metrics, add the following dependency to the "),a("em",[t._v("dependencies")]),t._v("\nsection of your build descriptor:")]),t._v(" "),a("ul",[a("li",[t._v("Maven (in your "),a("code",[t._v("pom.xml")]),t._v("):")])]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("io.vertx"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("vertx-dropwizard-metrics"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${maven.version}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("ul",[a("li",[t._v("Gradle (in your "),a("code",[t._v("build.gradle")]),t._v(" file):")])]),t._v(" "),a("div",{staticClass:"language-groovy extra-class"},[a("pre",{pre:!0,attrs:{class:"language-groovy"}},[a("code",[t._v("compile "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'io.vertx:vertx-dropwizard-metrics:${maven.version}'")]),t._v("\n")])])]),a("p",[t._v("Then when you create vertx enable metrics using the\n"),a("code",[t._v("DropwizardMetricsOptions")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Vertx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vertx/core"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" vertx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vertx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VertxOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DropwizardMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setEnabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("You can also enable JMX:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Vertx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vertx/core"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" vertx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vertx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VertxOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DropwizardMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setJmxEnabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("To see details about JMX see the "),a("a",{attrs:{href:"#jmx"}},[t._v("JMX")]),t._v(" section at the bottom.")]),t._v(" "),a("h1",{attrs:{id:"command-line-activation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#command-line-activation"}},[t._v("#")]),t._v(" Command line activation")]),t._v(" "),a("p",[t._v("When running Vert.x from the command line interface, metrics can be\nactivated via JVM system properties. System properties beginning with\n"),a("em",[t._v("vertx.metrics.options.")]),t._v(" are transmitted to the metrics options.")]),t._v(" "),a("p",[t._v("The "),a("em",[t._v("vertx.metrics.options.enabled")]),t._v(" is a standard Vert.x Core option for\nenabling the metrics implementations, this options must be set to\n"),a("code",[t._v("true")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("java -jar your-fat-jar -Dvertx.metrics.options.enabled=true\n")])])]),a("p",[t._v("The "),a("code",[t._v("vertx.metrics.options.registryName")]),t._v(" configures the "),a("a",{attrs:{href:"#dropwizard-registry"}},[t._v("Dropwizard\nRegistry")]),t._v(" to use:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("java -jar your-fat-jar -Dvertx.metrics.options.enabled=true -Dvertx.metrics.options.registryName=my-registry\n")])])]),a("p",[t._v("The "),a("code",[t._v("vertx.metrics.options.jmxEnabled")]),t._v(" and\n"),a("code",[t._v("vertx.metrics.options.jmxDomain")]),t._v(" configures the "),a("a",{attrs:{href:"#jmx"}},[t._v("JMX")]),t._v("\nregistration:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("java -jar your-fat-jar -Dvertx.metrics.options.enabled=true -Dvertx.metrics.options.jmxEnabled=true ...\n")])])]),a("p",[t._v("The "),a("code",[t._v("vertx.metrics.options.configPath")]),t._v(" option allows to reconfigure the\nmetrics from a property file.")]),t._v(" "),a("h1",{attrs:{id:"metrics-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#metrics-service"}},[t._v("#")]),t._v(" Metrics service")]),t._v(" "),a("p",[t._v("While Vert.x core defines an SPI for reporting metrics (implemented for\ninstance in this project), it does not define an API for retrieving\nmetrics (because some metrics collectors just do reporting and nothing\nmore).")]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("MetricsService")]),t._v(" provides an API in front of the Dropwizard Registry\nto get metrics data snapshots.")]),t._v(" "),a("h2",{attrs:{id:"naming"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#naming"}},[t._v("#")]),t._v(" Naming")]),t._v(" "),a("p",[t._v("Each measured component listed below (except for Vertx) will have a base\nname associated with it. Each metric can be retrieved by providing the\nfully qualified name <fqn> "),a("code",[t._v("baseName")]),t._v(" + "),a("code",[t._v(".")]),t._v(" + "),a("code",[t._v("metricName")]),t._v(" from Vertx:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" metrics "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" metricsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMetricsSnapshot")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmetrics"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eventbus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handlers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("or from the measured component itself using just the metric name:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" eventBus "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("eventBus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" metrics "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" metricsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMetricsSnapshot")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eventBus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmetrics"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handlers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("See more examples below on how to retrieve/use metrics for a specific\ncomponent.")]),t._v(" "),a("p",[t._v("Metrics names can also be listed:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" metricsNames "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" metricsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("metricsNames")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmetricsNames"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("metricsName")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Known metrics name "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" metricsName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("code",[t._v("baseName")]),t._v(" defaults to "),a("code",[t._v("vertx")]),t._v(", but can be set to a custom value:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" metricsOptions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DropwizardMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setBaseName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"foo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"retrieving-metrics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#retrieving-metrics"}},[t._v("#")]),t._v(" Retrieving metrics")]),t._v(" "),a("p",[t._v("Once enabled, the "),a("code",[t._v("MetricsService")]),t._v(" allows to retrieve metrics snapshots\nfrom any "),a("code",[t._v("Measured")]),t._v(" object which provides a map of the metric name to\nthe data, represented by a "),a("code",[t._v("JsonObject")]),t._v(". So for example if we were to\nprint out all metrics for a particular Vert.x instance:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" MetricsService "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vertx/dropwizard"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" metricsService "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" MetricsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" metrics "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" metricsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMetricsSnapshot")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("metrics"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("blockquote",[a("p",[a("strong",[t._v("Note")])]),t._v(" "),a("p",[t._v("For details on the actual contents of the data (the actual metric)\nrepresented by the "),a("code",[t._v("JsonObject")]),t._v(" consult the implementation\ndocumentation like\n"),a("a",{attrs:{href:"https://github.com/vert-x3/vertx-metrics",target:"_blank",rel:"noopener noreferrer"}},[t._v("vertx-metrics"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("Often it is desired that you only want to capture specific metrics for a\nparticular component, like an http server without having to know the\ndetails of the naming scheme of every metric (something which is left to\nthe implementers of the SPI).")]),t._v(" "),a("p",[t._v("Since "),a("code",[t._v("HttpServer")]),t._v(" implements "),a("code",[t._v("Measured")]),t._v(", you can easily grab all\nmetrics that are specific for that particular http server.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" MetricsService "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vertx/dropwizard"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" metricsService "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" MetricsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" server "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createHttpServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// set up server")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" metrics "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" metricsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMetricsSnapshot")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Metrics can also be retrieved using a base name:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" MetricsService "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vertx/dropwizard"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" metricsService "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" MetricsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" metrics "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" metricsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMetricsSnapshot")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vertx.eventbus.message"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h1",{attrs:{id:"data"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data"}},[t._v("#")]),t._v(" Data")]),t._v(" "),a("p",[t._v("Below is how each dropwizard metric is represented in JSON. Please refer\nto the "),a("a",{attrs:{href:"https://github.com/dropwizard/metrics",target:"_blank",rel:"noopener noreferrer"}},[t._v("Dropwizard metrics"),a("OutboundLink")],1),t._v("\ndocumentation for detailed information on each metric.")]),t._v(" "),a("h2",{attrs:{id:"gauge"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gauge"}},[t._v("#")]),t._v(" Gauge")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gauge"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" value "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// any json value")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"counter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#counter"}},[t._v("#")]),t._v(" Counter")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"counter"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// number")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"histogram"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#histogram"}},[t._v("#")]),t._v(" Histogram")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"histogram"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// long")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"min"')]),t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// long")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"max"')]),t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// long")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mean"')]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"stddev"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"median"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"75%"')]),t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"95%"')]),t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"98%"')]),t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"99%"')]),t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"99.9%"')]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"meter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#meter"}},[t._v("#")]),t._v(" Meter")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"meter"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v("             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// long")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"meanRate"')]),t._v("          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"oneMinuteRate"')]),t._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fiveMinuteRate"')]),t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fifteenMinuteRate"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rate"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"events/second"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// string representing rate")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"throughputmeter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#throughputmeter"}},[t._v("#")]),t._v(" ThroughputMeter")]),t._v(" "),a("p",[t._v("Extends a "),a("a",{attrs:{href:"#meter"}},[t._v("Meter")]),t._v(" to provide an instant throughput.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"meter"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v("             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("40")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// long")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"meanRate"')]),t._v("          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"oneSecondRate"')]),t._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// long - number of occurence for the last second")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"oneMinuteRate"')]),t._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fiveMinuteRate"')]),t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fifteenMinuteRate"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rate"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"events/second"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// string representing rate")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"timer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#timer"}},[t._v("#")]),t._v(" Timer")]),t._v(" "),a("p",[t._v("A timer is basically a combination of Histogram + Meter.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"timer"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// histogram data")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// long")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"min"')]),t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// long")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"max"')]),t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// long")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mean"')]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"stddev"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"median"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"75%"')]),t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"95%"')]),t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"98%"')]),t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"99%"')]),t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"99.9%"')]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// meter data")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"meanRate"')]),t._v("          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"oneMinuteRate"')]),t._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fiveMinuteRate"')]),t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fifteenMinuteRate"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rate"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"events/second"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// string representing rate")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"throughput-timer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#throughput-timer"}},[t._v("#")]),t._v(" Throughput Timer")]),t._v(" "),a("p",[t._v("Extends a "),a("a",{attrs:{href:"#timer"}},[t._v("Timer")]),t._v(" to provide an instant throughput metric.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"timer"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// histogram data")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// long")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"min"')]),t._v("        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// long")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"max"')]),t._v("        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// long")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mean"')]),t._v("       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"stddev"')]),t._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"median"')]),t._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"75%"')]),t._v("        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"95%"')]),t._v("        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"98%"')]),t._v("        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"99%"')]),t._v("        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"99.9%"')]),t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// meter data")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"meanRate"')]),t._v("          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"oneSecondRate"')]),t._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// long - number of occurence for the last second")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"oneMinuteRate"')]),t._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fiveMinuteRate"')]),t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fifteenMinuteRate"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// double")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rate"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"events/second"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// string representing rate")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h1",{attrs:{id:"the-metrics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#the-metrics"}},[t._v("#")]),t._v(" The metrics")]),t._v(" "),a("p",[t._v("The following metrics are currently provided.")]),t._v(" "),a("h2",{attrs:{id:"vert-x-metrics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vert-x-metrics"}},[t._v("#")]),t._v(" Vert.x metrics")]),t._v(" "),a("p",[t._v("The following metrics are provided:")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("vertx.event-loop-size")]),t._v(" - A "),a("a",{attrs:{href:"#gauge"}},[t._v("Gauge")]),t._v(" of the number of threads\nin the event loop pool")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("vertx.worker-pool-size")]),t._v(" - A "),a("a",{attrs:{href:"#gauge"}},[t._v("Gauge")]),t._v(" of the number of\nthreads in the worker pool")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("vertx.cluster-host")]),t._v(" - A "),a("a",{attrs:{href:"#gauge"}},[t._v("Gauge")]),t._v(" of the cluster-host setting")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("vertx.cluster-port")]),t._v(" - A "),a("a",{attrs:{href:"#gauge"}},[t._v("Gauge")]),t._v(" of the cluster-port setting")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("vertx.verticles")]),t._v(" - A "),a("a",{attrs:{href:"#counter"}},[t._v("Counter")]),t._v(" of the number of verticles\ncurrently deployed")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("vertx.verticles.<verticle-name>")]),t._v(" - A "),a("a",{attrs:{href:"#counter"}},[t._v("Counter")]),t._v(" of the\nnumber of deployment of a particular verticle")])])]),t._v(" "),a("h2",{attrs:{id:"event-bus-metrics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#event-bus-metrics"}},[t._v("#")]),t._v(" Event bus metrics")]),t._v(" "),a("p",[t._v("Base name: "),a("code",[t._v("vertx.eventbus")])]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("handlers")]),t._v(" - A "),a("a",{attrs:{href:"#counter"}},[t._v("Counter")]),t._v(" of the number of event bus\nhandlers")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("handlers.myaddress")]),t._v(" - A "),a("a",{attrs:{href:"#timer"}},[t._v("Timer")]),t._v(" representing the rate of\nwhich messages are being processed for the "),a("em",[t._v("myaddress")]),t._v(" handler")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.bytes-read")]),t._v(" - A "),a("a",{attrs:{href:"#meter"}},[t._v("Meter")]),t._v(" of the number of bytes\nread when receiving remote messages")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.bytes-written")]),t._v(" - A "),a("a",{attrs:{href:"#meter"}},[t._v("Meter")]),t._v(" of the number of bytes\nwritten when sending remote messages")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.pending")]),t._v(" - A "),a("a",{attrs:{href:"#counter"}},[t._v("Counter")]),t._v(" of the number of messages\nreceived but not yet processed by an handler")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.pending-local")]),t._v(" - A "),a("a",{attrs:{href:"#counter"}},[t._v("Counter")]),t._v(" of the number of\nmessages locally received but not yet processed by an handler")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.pending-remote")]),t._v(" - A "),a("a",{attrs:{href:"#counter"}},[t._v("Counter")]),t._v(" of the number of\nmessages remotely received but not yet processed by an handler")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.discarded")]),t._v(" - A "),a("a",{attrs:{href:"#counter"}},[t._v("Counter")]),t._v(" of the number of\nmessages discarded by an handler")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.discarded-local")]),t._v(" - A "),a("a",{attrs:{href:"#counter"}},[t._v("Counter")]),t._v(" of the number of\nmessages locally discarded by an handler")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.discarded-remote")]),t._v(" - A "),a("a",{attrs:{href:"#counter"}},[t._v("Counter")]),t._v(" of the number of\nmessages remotely discarded by an handler")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.received")]),t._v(" - A "),a("a",{attrs:{href:"#throughput_meter"}},[t._v("ThroughputMeter")]),t._v("\nrepresenting the rate of which messages are being received")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.received-local")]),t._v(" - A "),a("a",{attrs:{href:"#throughput_meter"}},[t._v("ThroughputMeter")]),t._v("\nrepresenting the rate of which local messages are being received")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.received-remote")]),t._v(" - A "),a("a",{attrs:{href:"#throughput_meter"}},[t._v("ThroughputMeter")]),t._v("\nrepresenting the rate of which remote messages are being received")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.delivered")]),t._v(" - A "),a("a",{attrs:{href:"#throughput_meter"}},[t._v("ThroughputMeter")]),t._v("\nrepresenting the rate of which messages are being delivered to an\nhandler")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.delivered-local")]),t._v(" - A "),a("a",{attrs:{href:"#throughput_meter"}},[t._v("ThroughputMeter")]),t._v("\nrepresenting the rate of which local messages are being delivered to\nan handler")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.delivered-remote")]),t._v(" - A "),a("a",{attrs:{href:"#throughput_meter"}},[t._v("ThroughputMeter")]),t._v("\nrepresenting the rate of which remote messages are being delivered\nto an handler")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.sent")]),t._v(" - A "),a("a",{attrs:{href:"#throughput_metert"}},[t._v("???")]),t._v(" representing the rate\nof which messages are being sent")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.sent-local")]),t._v(" - A "),a("a",{attrs:{href:"#throughput_meter"}},[t._v("ThroughputMeter")]),t._v("\nrepresenting the rate of which messages are being sent locally")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.sent-remote")]),t._v(" - A "),a("a",{attrs:{href:"#throughput_meter"}},[t._v("ThroughputMeter")]),t._v("\nrepresenting the rate of which messages are being sent remotely")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.published")]),t._v(" - A "),a("a",{attrs:{href:"#throughput_meter"}},[t._v("ThroughputMeter")]),t._v("\nrepresenting the rate of which messages are being published")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.published-local")]),t._v(" - A "),a("a",{attrs:{href:"#throughput_meter"}},[t._v("ThroughputMeter")]),t._v("\nrepresenting the rate of which messages are being published locally")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.published-remote")]),t._v(" - A "),a("a",{attrs:{href:"#throughput_meter"}},[t._v("ThroughputMeter")]),t._v("\nrepresenting the rate of which messages are being published remotely")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("messages.reply-failures")]),t._v(" - A "),a("a",{attrs:{href:"#meter"}},[t._v("Meter")]),t._v(" representing the rate\nof reply failures")])])]),t._v(" "),a("p",[t._v("The monitored event bus handlers is configurable via a match performed\non the handler registration address. Vert.x can have potentially a huge\namount of registered event bus, therefore the only good default for this\nsetting is to monitor zero handlers.")]),t._v(" "),a("p",[t._v("The monitored handlers can be configured in the\n"),a("code",[t._v("DropwizardMetricsOptions")]),t._v(" via a specific address match or a regex\nmatch:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Vertx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vertx/core"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" vertx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vertx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VertxOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DropwizardMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setEnabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMonitoredEventBusHandlers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"some-address"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"business-.*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"REGEX"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("blockquote",[a("p",[a("strong",[t._v("Warning")])]),t._v(" "),a("p",[t._v("if you use regex match, a wrong regex can potentially match a lot of\nhandlers.")])]),t._v(" "),a("h2",{attrs:{id:"http-server-metrics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-server-metrics"}},[t._v("#")]),t._v(" Http server metrics")]),t._v(" "),a("p",[t._v("Base name: "),a("code",[t._v("vertx.http.servers.<host>:<port>")])]),t._v(" "),a("p",[t._v("Http server includes all the metrics of a "),a("a",{attrs:{href:"#net-server-metrics"}},[t._v("Net\nServer")]),t._v(" plus the following:")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("requests")]),t._v(" - A "),a("a",{attrs:{href:"#throughput_timer"}},[t._v("Throughput Timer")]),t._v(" of a request\nand the rate of its occurrence")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("<http-method>-requests")]),t._v(" - A "),a("a",{attrs:{href:"#throughput_timer"}},[t._v("Throughput Timer")]),t._v("\nof a specific http method request and the rate of its occurrence")]),t._v(" "),a("ul",[a("li",[t._v("Examples: "),a("code",[t._v("get-requests")]),t._v(", "),a("code",[t._v("post-requests")])])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("<http-method>-requests./<uri>")]),t._v(" - A "),a("a",{attrs:{href:"#throughput_timer"}},[t._v("Throughput\nTimer")]),t._v(" of a specific http method & URI request\nand the rate of its occurrence")]),t._v(" "),a("ul",[a("li",[t._v("Examples: "),a("code",[t._v("get-requests./some/uri")]),t._v(",\n"),a("code",[t._v("post-requests./some/uri?foo=bar")])])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("responses-1xx")]),t._v(" - A "),a("a",{attrs:{href:"#throughput_meter"}},[t._v("ThroughputMeter")]),t._v(" of the 1xx\nresponse code")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("responses-2xx")]),t._v(" - A "),a("a",{attrs:{href:"#throughput_meter"}},[t._v("ThroughputMeter")]),t._v(" of the 2xx\nresponse code")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("responses-3xx")]),t._v(" - A "),a("a",{attrs:{href:"#throughput_meter"}},[t._v("ThroughputMeter")]),t._v(" of the 3xx\nresponse code")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("responses-4xx")]),t._v(" - A "),a("a",{attrs:{href:"#throughput_meter"}},[t._v("ThroughputMeter")]),t._v(" of the 4xx\nresponse code")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("responses-5xx")]),t._v(" - A "),a("a",{attrs:{href:"#throughput_meter"}},[t._v("ThroughputMeter")]),t._v(" of the 5xx\nresponse code")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("open-websockets")]),t._v(" - A "),a("a",{attrs:{href:"#counter"}},[t._v("Counter")]),t._v(" of the number of open web\nsocket connections")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("open-websockets.<remote-host>")]),t._v(" - A "),a("a",{attrs:{href:"#counter"}},[t._v("Counter")]),t._v(" of the\nnumber of open web socket connections for a particular remote host")])])]),t._v(" "),a("p",[t._v("Http URI metrics must be explicitly configured in the options either by\nexact match or regex match:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Vertx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vertx/core"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" vertx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vertx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VertxOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DropwizardMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setEnabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMonitoredHttpServerUris")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/foo/.*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"REGEX"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("In case if the uri contains some path parameters like "),a("code",[t._v("/users/:userId")]),t._v("\nit might not make sense to have a separate entry in the registry for\neach user id (like "),a("code",[t._v("get-requests./users/1")]),t._v(", "),a("code",[t._v("get-requests./users/2")]),t._v(" and\nso on) but a summarized one. To achieve that you can set an alias to the\nmatch instance in this case the alias will be used as a part of the\nregistry name instead of uri like "),a("code",[t._v("<http-method>-requests.<alias>")]),t._v(". In\naddition there will be separate counters for each response group for\neach defined alias like "),a("code",[t._v("responses-<code>.<alias>")]),t._v(".")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Vertx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vertx/core"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" vertx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vertx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VertxOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DropwizardMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setEnabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMonitoredHttpServerUris")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/users/.*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAlias")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"REGEX"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("For "),a("code",[t._v("bytes-read")]),t._v(" and "),a("code",[t._v("bytes-written")]),t._v(" the bytes represent the body of\nthe request/response, so headers, etc are ignored.")])]),t._v(" "),a("h2",{attrs:{id:"http-client-metrics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-client-metrics"}},[t._v("#")]),t._v(" Http client metrics")]),t._v(" "),a("p",[t._v("Base name: "),a("code",[t._v("vertx.http.clients")]),t._v(" (by default) or\n"),a("code",[t._v("vertx.http.clients.<id>")]),t._v(" where "),a("code",[t._v("<id>")]),t._v(" is a non empty string configured\nby "),a("code",[t._v("setMetricsName")]),t._v(".")]),t._v(" "),a("p",[t._v("Http client includes all the metrics of a "),a("a",{attrs:{href:"#http-server-metrics"}},[t._v("Http\nServer")]),t._v(" plus the following:")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("connections.max-pool-size")]),t._v(" - A "),a("a",{attrs:{href:"#gauge"}},[t._v("Gauge")]),t._v(" of the max\nconnection pool size")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("connections.pool-ratio")]),t._v(" - A ratio "),a("a",{attrs:{href:"#gauge"}},[t._v("Gauge")]),t._v(" of the open\nconnections / max connection pool size")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("responses-1xx")]),t._v(" - A "),a("a",{attrs:{href:"#meter"}},[t._v("Meter")]),t._v(" of the 1xx response code")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("responses-2xx")]),t._v(" - A "),a("a",{attrs:{href:"#meter"}},[t._v("Meter")]),t._v(" of the 2xx response code")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("responses-3xx")]),t._v(" - A "),a("a",{attrs:{href:"#meter"}},[t._v("Meter")]),t._v(" of the 3xx response code")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("responses-4xx")]),t._v(" - A "),a("a",{attrs:{href:"#meter"}},[t._v("Meter")]),t._v(" of the 4xx response code")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("responses-5xx")]),t._v(" - A "),a("a",{attrs:{href:"#meter"}},[t._v("Meter")]),t._v(" of the 5xx response code")])])]),t._v(" "),a("p",[t._v("The http client manages a pool of connection for each remote endpoint\nwith a queue of pending requests")]),t._v(" "),a("p",[t._v("Endpoint metrics are available too:")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("endpoint.<host:port>.queue-delay")]),t._v(" - A "),a("a",{attrs:{href:"#timer"}},[t._v("Timer")]),t._v(" of the wait\ntime of a pending request in the queue")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("endpoint.<host:port>.queue-size")]),t._v(" - A "),a("a",{attrs:{href:"#counter"}},[t._v("Counter")]),t._v(" of the\nactual queue size")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("endpoint.<host:port>.open-netsockets")]),t._v(" - A "),a("a",{attrs:{href:"#counter"}},[t._v("Counter")]),t._v(" of\nthe actual number of open sockets to the endpoint")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("endpoint.<host:port>.usage")]),t._v(" - A "),a("a",{attrs:{href:"#timer"}},[t._v("Timer")]),t._v(" of the delay\nbetween the request starts and the response ends")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("endpoint.<host:port>.in-use")]),t._v(" - A "),a("a",{attrs:{href:"#counter"}},[t._v("Counter")]),t._v(" of the actual\nnumber of request/response")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("endpoint.<host:port>.ttfb")]),t._v(" - A "),a("a",{attrs:{href:"#timer"}},[t._v("Timer")]),t._v(" of the wait time\nbetween the request ended and its response begins")])])]),t._v(" "),a("p",[t._v("where <host> is the endpoint host name possibly unresolved and\n<port> the TCP port.")]),t._v(" "),a("p",[t._v("The monitored endpoints are configurable via a match performed on the\nserver "),a("code",[t._v("$host:$port")]),t._v(". The default for this setting is to monitor no\nendpoints.")]),t._v(" "),a("p",[t._v("The monitored endpoints can be configured in the\n"),a("code",[t._v("DropwizardMetricsOptions")]),t._v(" via a specific hostname match or a regex\nmatch:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Vertx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vertx/core"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" vertx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vertx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VertxOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DropwizardMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setEnabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMonitoredHttpClientEndpoints")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"some-host:80"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"another-host:.*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"REGEX"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"net-server-metrics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#net-server-metrics"}},[t._v("#")]),t._v(" Net server metrics")]),t._v(" "),a("p",[t._v("Base name: "),a("code",[t._v("vertx.net.servers.<host>:<port>")])]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("open-netsockets")]),t._v(" - A "),a("a",{attrs:{href:"#counter"}},[t._v("Counter")]),t._v(" of the number of open net\nsocket connections")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("open-netsockets.<remote-host>")]),t._v(" - A "),a("a",{attrs:{href:"#counter"}},[t._v("Counter")]),t._v(" of the\nnumber of open net socket connections for a particular remote host")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("connections")]),t._v(" - A "),a("a",{attrs:{href:"#timer"}},[t._v("Timer")]),t._v(" of a connection and the rate of\nits occurrence")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("exceptions")]),t._v(" - A "),a("a",{attrs:{href:"#counter"}},[t._v("Counter")]),t._v(" of the number of exceptions")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("bytes-read")]),t._v(" - A "),a("a",{attrs:{href:"#histogram"}},[t._v("Histogram")]),t._v(" of the number of bytes\nread.")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("bytes-written")]),t._v(" - A "),a("a",{attrs:{href:"#histogram"}},[t._v("Histogram")]),t._v(" of the number of bytes\nwritten.")])])]),t._v(" "),a("h2",{attrs:{id:"net-client-metrics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#net-client-metrics"}},[t._v("#")]),t._v(" Net client metrics")]),t._v(" "),a("p",[t._v("Base name: "),a("code",[t._v("vertx.net.clients")]),t._v(" (by default) or "),a("code",[t._v("vertx.net.clients.<id>")]),t._v("\nwhere "),a("code",[t._v("<id>")]),t._v(" is a non empty string configured by "),a("code",[t._v("setMetricsName")]),t._v(".")]),t._v(" "),a("p",[t._v("Net client includes all the metrics of a "),a("a",{attrs:{href:"#net-server-metrics"}},[t._v("Net\nServer")])]),t._v(" "),a("h2",{attrs:{id:"datagram-socket-metrics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#datagram-socket-metrics"}},[t._v("#")]),t._v(" Datagram socket metrics")]),t._v(" "),a("p",[t._v("Base name: "),a("code",[t._v("vertx.datagram")])]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("sockets")]),t._v(" - A "),a("a",{attrs:{href:"#counter"}},[t._v("Counter")]),t._v(" of the number of datagram sockets")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("exceptions")]),t._v(" - A "),a("a",{attrs:{href:"#counter"}},[t._v("Counter")]),t._v(" of the number of exceptions")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("bytes-written")]),t._v(" - A "),a("a",{attrs:{href:"#histogram"}},[t._v("Histogram")]),t._v(" of the number of bytes\nwritten.")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("<host>:<port>.bytes-read")]),t._v(" - A "),a("a",{attrs:{href:"#histogram"}},[t._v("Histogram")]),t._v(" of the number\nof bytes read.")]),t._v(" "),a("ul",[a("li",[t._v("This metric will only be available if the datagram socket is\nlistening")])])])]),t._v(" "),a("h2",{attrs:{id:"pool-metrics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pool-metrics"}},[t._v("#")]),t._v(" Pool metrics")]),t._v(" "),a("p",[t._v("Base name: "),a("code",[t._v("vertx.pools.<type>.<name>")]),t._v(" where "),a("code",[t._v("type")]),t._v(" is the type of the\npool (e.g "),a("em",[t._v("worker")]),t._v(", "),a("em",[t._v("datasource")]),t._v(") and "),a("code",[t._v("name")]),t._v(" is the name of the pool\n(e.g "),a("code",[t._v("vert.x-worker-thread")]),t._v(").")]),t._v(" "),a("p",[t._v("Pools of type "),a("em",[t._v("worker")]),t._v(" are blocking worker pools. Vert.x exposes its\nworker as "),a("em",[t._v("vert.x-worker-thread")]),t._v(" and "),a("em",[t._v("vert.x-internal-blocking")]),t._v(". Named\nworker executor created with "),a("code",[t._v("WorkerExecutor")]),t._v(" are exposed.")]),t._v(" "),a("p",[t._v("Datasource created with Vert.x JDBC clients are exposed as "),a("em",[t._v("datasource")]),t._v(".")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("queue-delay")]),t._v(" - A "),a("a",{attrs:{href:"#timer"}},[t._v("Timer")]),t._v(" measuring the duration of the\ndelay to obtain the resource, i.e the wait time in the queue")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("queue-size")]),t._v(" - A "),a("a",{attrs:{href:"#counter"}},[t._v("Counter")]),t._v(" of the actual number of waiters\nin the queue")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("usage")]),t._v(" - A "),a("a",{attrs:{href:"#timer"}},[t._v("Timer")]),t._v(" measuring the duration of the usage of\nthe resource")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("in-use")]),t._v(" - A "),a("a",{attrs:{href:"#count"}},[t._v("???")]),t._v(" of the actual number of resources used")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("pool-ratio")]),t._v(" - A ratio "),a("a",{attrs:{href:"#gauge"}},[t._v("Gauge")]),t._v(" of the in use resource / pool\nsize")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("max-pool-size")]),t._v(" - A "),a("a",{attrs:{href:"#gauge"}},[t._v("Gauge")]),t._v(" of the max pool size")])])]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("pool-ratio")]),t._v(" and the "),a("code",[t._v("max_pool_size")]),t._v(" wont be present when the\nmeasured pools max pool size could not be determined.")]),t._v(" "),a("h1",{attrs:{id:"jmx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jmx"}},[t._v("#")]),t._v(" JMX")]),t._v(" "),a("p",[t._v("JMX is disabled by default.")]),t._v(" "),a("p",[t._v("If you want JMX, then you need to enabled that:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Vertx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vertx/core"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" vertx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vertx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VertxOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DropwizardMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setJmxEnabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("If running Vert.x from the command line you can enable metrics and JMX\nby uncommented the JMX_OPTS line in the "),a("code",[t._v("vertx")]),t._v(" or "),a("code",[t._v("vertx.bat")]),t._v(" script:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('JMX_OPTS="-Dcom.sun.management.jmxremote -Dvertx.metrics.options.jmxEnabled=true"\n')])])]),a("p",[t._v("You can configure the domain under which the MBeans will be created:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Vertx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vertx/core"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" vertx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vertx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VertxOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DropwizardMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setJmxEnabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setJmxDomain")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mydomain"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("In the command line, just append the following system properties to your\napplication (works for the "),a("code",[t._v("vertx")]),t._v(" cli and fat jars):")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("-Dvertx.metrics.options.jmxEnabled=true -Dvertx.metrics.options.jmxDomain=vertx\n")])])]),a("h1",{attrs:{id:"enabling-remote-jmx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#enabling-remote-jmx"}},[t._v("#")]),t._v(" Enabling remote JMX")]),t._v(" "),a("p",[t._v("If you want the metrics to be exposed remotely over JMX, then you need\nto set, at minimum the following system property:")]),t._v(" "),a("p",[a("code",[t._v("com.sun.management.jmxremote")])]),t._v(" "),a("p",[t._v("If running from the command line this can be done by editing the "),a("code",[t._v("vertx")]),t._v("\nor "),a("code",[t._v("vertx.bat")]),t._v(" and uncommenting the "),a("code",[t._v("JMX_OPTS")]),t._v(" line.")]),t._v(" "),a("p",[t._v("Please see the "),a("a",{attrs:{href:"http://docs.oracle.com/javase/8/docs/technotes/guides/management/agent.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Oracle JMX\ndocumentation"),a("OutboundLink")],1),t._v("\nfor more information on configuring JMX")]),t._v(" "),a("p",[a("strong",[t._v("If running Vert.x on a public server please be careful about exposing\nremote JMX access")])]),t._v(" "),a("h1",{attrs:{id:"accessing-dropwizard-registry"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#accessing-dropwizard-registry"}},[t._v("#")]),t._v(" Accessing Dropwizard Registry")]),t._v(" "),a("p",[t._v("When configuring the metrics service, an optional registry name can be\nspecified for registering the underlying "),a("a",{attrs:{href:"https://dropwizard.github.io/metrics/3.1.0/getting-started/#the-registry",target:"_blank",rel:"noopener noreferrer"}},[t._v("Dropwizard\nRegistry"),a("OutboundLink")],1),t._v("\nin the the "),a("a",{attrs:{href:"https://dropwizard.github.io/metrics/3.1.0/apidocs/com/codahale/metrics/SharedMetricRegistries.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Dropwizard Shared\nRegistry"),a("OutboundLink")],1),t._v("\nso you can retrieve this registry and use according to your needs.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Vertx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vertx/core"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" options "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VertxOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DropwizardMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setEnabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRegistryName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my-registry"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" vertx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vertx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Get the registry")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" registry "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.codahale.metrics.SharedMetricRegistries"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrCreate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my-registry"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Do whatever you need with the registry")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h1",{attrs:{id:"using-already-existing-dropwizard-registry"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-already-existing-dropwizard-registry"}},[t._v("#")]),t._v(" Using already existing Dropwizard Registry")]),t._v(" "),a("p",[t._v("Optionally, it is possible to utilize already existing "),a("a",{attrs:{href:"https://dropwizard.github.io/metrics/3.1.0/getting-started/#the-registry",target:"_blank",rel:"noopener noreferrer"}},[t._v("Dropwizard\nRegistry"),a("OutboundLink")],1),t._v(".\nIn order to do so pass "),a("code",[t._v("MetricRegistry")]),t._v(" instance as parameter for\n"),a("code",[t._v("setMetricRegistry")]),t._v(" function in "),a("code",[t._v("VertxOptions")]),t._v(" object.")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MetricRegistry")]),t._v(" metricRegistry "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MetricRegistry")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VertxOptions")]),t._v(" options "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VertxOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DropwizardMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setEnabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMetricRegistry")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("metricRegistry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vertx")]),t._v(" vertx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vertx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vertx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h1",{attrs:{id:"using-jolokia-and-hawtio"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-jolokia-and-hawtio"}},[t._v("#")]),t._v(" Using Jolokia and Hawtio")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://jolokia.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jolokia"),a("OutboundLink")],1),t._v(" is a JMX-HTTP bridge giving an\nalternative to JSR-160 connectors. It is an agent based approach with\nsupport for many platforms. In addition to basic JMX operations it\nenhances JMX remoting with features like bulk requests.")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://hawt.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hawtio"),a("OutboundLink")],1),t._v(" is a modular web console consuming the data\nexposed by Jolokia. It lets you create dashboards and retrieve data from\nJMX such as memory, cpu, or any vert.x metrics.")]),t._v(" "),a("p",[t._v("This section explains how to configure your vert.x application to\nretrieve the metrics in Hawtio.")]),t._v(" "),a("p",[t._v("First, you need to configure your vert.x instance with the following\noptions:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Vertx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vertx/core"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" vertx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vertx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VertxOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DropwizardMetricsOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setEnabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setJmxEnabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setJmxDomain")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vertx-metrics"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("You can change the domain to whatever you want. The same configuration\ncan be used for clustered Vert.x instances. This configuration instructs\nvertx-dropwizard-metrics to expose the metrics in the local MBean\nserver, so Jolokia can retrieve them.")]),t._v(" "),a("p",[t._v("Then you need, to "),a("em",[t._v("plug")]),t._v(" jolokia to expose the data. There are several\nways to "),a("em",[t._v("plug")]),t._v(" jolokia. See "),a("a",{attrs:{href:"https://jolokia.org/reference/html/architecture.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("for further\ndetails"),a("OutboundLink")],1),t._v(". Here, we\nexplain how to use the Jolokia agent with the default configuration.\nRefer to the "),a("a",{attrs:{href:"https://jolokia.org/reference/html/",target:"_blank",rel:"noopener noreferrer"}},[t._v("the jolokia\ndocumentation"),a("OutboundLink")],1),t._v(" to configure it.")]),t._v(" "),a("p",[t._v("The agent can either be attached when you start the application or\nattached on a running JVM (you would need special permission to access\nthe process). In the first case, launch you application using:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("java -javaagent:/.../agents/jolokia-jvm.jar=port=7777,host=localhost -jar ...\n")])])]),a("p",[t._v("The "),a("code",[t._v("-javaagent")]),t._v(" specifies the path to the jolokia agent jar file. You\ncan configure the port and host from the command line. Here it registers\nthe REST endpoint on "),a("code",[t._v("http://localhost:7777")]),t._v(".")]),t._v(" "),a("p",[t._v("You can also attach the agent on a running JVM with:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("java -jar jolokia-jvm.jar start PID\n")])])]),a("p",[t._v("Replace "),a("code",[t._v("PID")]),t._v(" with the process id of the JVM.")]),t._v(" "),a("p",[t._v("Once Jolokia is configured and launched, you can consume the data from\nHawtio.")]),t._v(" "),a("p",[t._v("On Hawtio, enter the connection details as follows:")]),t._v(" "),a("p",[a("img",{attrs:{src:s(208),alt:"hawtio connect"}})]),t._v(" "),a("p",[t._v("Then, you can go to the "),a("em",[t._v("JMX")]),t._v(" tab and you should find a "),a("em",[t._v("directory")]),t._v(" with\nthe name you entered as JMX domain in the Vert.x configuration:")]),t._v(" "),a("p",[a("img",{attrs:{src:s(209),alt:"hawtio jmx"}})]),t._v(" "),a("p",[t._v("From this, you can configure your dashboard and retrieve any metric\nexposed by vert.x.")]),t._v(" "),a("h1",{attrs:{id:"using-jolokia-and-jmx4perl-to-expose-metrics-to-nagios"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-jolokia-and-jmx4perl-to-expose-metrics-to-nagios"}},[t._v("#")]),t._v(" Using Jolokia and JMX4Perl to expose metrics to Nagios")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://search.cpan.org/~roland/jmx4perl/scripts/check_jmx4perl",target:"_blank",rel:"noopener noreferrer"}},[t._v("Check_jmx4perl"),a("OutboundLink")],1),t._v("\nis a Nagios plugin using jmx4perl for accessing JMX data remotely. It\nlets you expose the Vert.x metrics to Nagios.")]),t._v(" "),a("p",[t._v("First you need to start your application with the Jolokia JVM agent\nattached to it. There are several ways to attach jolokia. See "),a("a",{attrs:{href:"https://jolokia.org/reference/html/architecture.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("for\nfurther details"),a("OutboundLink")],1),t._v(".\nHere, we explain how to use the Jolokia agent with the default\nconfiguration. Refer to the "),a("a",{attrs:{href:"https://jolokia.org/reference/html/",target:"_blank",rel:"noopener noreferrer"}},[t._v("the jolokia\ndocumentation"),a("OutboundLink")],1),t._v(" to configure it.")]),t._v(" "),a("p",[t._v("The agent can either be attached when you start the application or\nattached on a running JVM (you would need special permission to access\nthe process). In the first case, launch you application using:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("java -javaagent:/.../agents/jolokia-jvm.jar=port=7777,host=localhost -jar ...\n")])])]),a("p",[t._v("The "),a("code",[t._v("-javaagent")]),t._v(" specifies the path to the jolokia agent jar file. You\ncan configure the port and host from the command line. Here it registers\nthe REST endpoint on "),a("code",[t._v("http://localhost:7777")]),t._v(".")]),t._v(" "),a("p",[t._v("You can also attach the agent on a running JVM with:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("java -jar jolokia-jvm.jar start PID\n")])])]),a("p",[t._v("Replace "),a("code",[t._v("PID")]),t._v(" with the process id of the JVM.")]),t._v(" "),a("p",[t._v("Once Jolokia is started, you can configure your Nagios check such as:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("check_jmx4perl --url http://10.0.2.2:8778/jolokia --name eventloops --mbean vertx:name=vertx.event-loop-size\n--attribute Value --warning 4\n")])])]),a("p",[t._v("Check "),a("a",{attrs:{href:"http://search.cpan.org/~roland/jmx4perl/scripts/check_jmx4perl",target:"_blank",rel:"noopener noreferrer"}},[t._v("check_jmx4perl\ndocumentation"),a("OutboundLink")],1),t._v("\nto get more details about check configuration.")]),t._v(" "),a("h1",{attrs:{id:"metrics-commands-via-telnet-or-ssh-in-vert-x-shell-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#metrics-commands-via-telnet-or-ssh-in-vert-x-shell-service"}},[t._v("#")]),t._v(" Metrics commands via Telnet or SSH in Vert.x Shell service")]),t._v(" "),a("p",[t._v("To find out the available metrics commands you can use the "),a("em",[t._v("help")]),t._v("\nbuiltin command:")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Available commands")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("metrics-ls: List the known metrics for the current Vert.x\ninstance")])]),t._v(" "),a("li",[a("p",[t._v("metrics-info: Show metrics info for the current Vert.x instance\nin JSON format")])]),t._v(" "),a("li",[a("p",[t._v("metrics-histogram: Show histogram metrics table for the current\nVert.x instance in real time")])])])])])])}),[],!1,null,null,null);e.default=n.exports}}]);