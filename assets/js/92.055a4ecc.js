(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{409:function(t,e,a){"use strict";a.r(e);var s=a(43),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("Vert.x client for sending SMTP emails via a local mail server (e.g.\npostfix) or by external mail server (e.g. googlemail or aol).")]),t._v(" "),a("p",[t._v("The client supports a few additional auth methods like DIGEST-MD5 and\nhas full support for TLS and SSL and is completely asynchronous. The\nclient supports connection pooling to keep connections open to be\nreused.")]),t._v(" "),a("p",[t._v("To use this project, add the following dependency to the "),a("em",[t._v("dependencies")]),t._v("\nsection of your build descriptor:")]),t._v(" "),a("ul",[a("li",[t._v("Maven (in your "),a("code",[t._v("pom.xml")]),t._v("):")])]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("io.vertx"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("vertx-mail-client"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${maven.version}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("ul",[a("li",[t._v("Gradle (in your "),a("code",[t._v("build.gradle")]),t._v(" file):")])]),t._v(" "),a("div",{staticClass:"language-groovy extra-class"},[a("pre",{pre:!0,attrs:{class:"language-groovy"}},[a("code",[t._v("compile "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'io.vertx:vertx-mail-client:${maven.version}'")]),t._v("\n")])])]),a("h1",{attrs:{id:"creating-a-client"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-client"}},[t._v("#")]),t._v(" Creating a client")]),t._v(" "),a("p",[t._v("You can send mails by creating a client that opens SMTP connections from\nthe local jvm.")]),t._v(" "),a("p",[t._v("The client uses a configuration object, the default config is created as\nempty object and will connect to localhost port 25, which should be ok\nin a standard Linux environment where you have Postfix or similar mail\nserver running on the local machine. For all possible properties of the\nconfig object, see below.")]),t._v(" "),a("p",[t._v("The client can use a connection pool of the SMTP connections to get rid\nof the overhead of connecting each time to the server, negotiating TLS\nand login (this function can be turned off by setting keepAlive =\nfalse). A client can either be shared or non-shared, if it is shared,\nthe same connection pool will be used for all clients using the same\nidentifier.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" MailClient "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vertx/mail"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MailConfig")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" mailClient "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" MailClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createShared")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"exampleclient"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("The first call to MailClient.createShared will actually create the pool\nwith the specified config. Subsequent calls will return a new client\ninstance that uses the same pool, so the configuration won’t be used.")]),t._v(" "),a("p",[t._v("If you leave out the pool identifier, a default pool will be created.\nNote that the clients are shared in the scope of a vertx instance only\n(so two different vertx will have different pools with the same\nidentifier).")]),t._v(" "),a("p",[t._v("The unshared client can be created the same way leaving out the\nidentifier.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" MailClient "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vertx/mail"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MailConfig")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" mailClient "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" MailClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("A more elaborate example using a mailserver that requires login via TLS")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" MailClient "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vertx/mail"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MailConfig")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hostname "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mail.example.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("port "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("587")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("starttls "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"REQUIRED"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("username "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("password "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" mailClient "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" MailClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vertx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h1",{attrs:{id:"sending-mails"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sending-mails"}},[t._v("#")]),t._v(" Sending mails")]),t._v(" "),a("p",[t._v("Once the client object is created, you can use it to send mails. Since\nthe sending of the mails works asynchronous in vert.x, the result\nhandler will be called when the mail operation finishes. You can start\nmany mail send operations in parallel, the connection pool will limit\nthe number of concurrent operations so that new operations will wait in\nqueue if no slots are available.")]),t._v(" "),a("p",[t._v("A mail message is constructed as JSON. The MailMessage object has\nproperties from, to, cc, bcc, subject, text, html etc. Depending on\nwhich values are set, the format of the generated MIME message will\nvary. The recipient address properties can either be a single address or\na list of addresses.")]),t._v(" "),a("p",[t._v("The MIME encoder supports us-ascii (7bit) headers/messages and utf8\n(usually quoted-printable) headers/messages")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MailMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmessage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user@example.com (Example User)"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmessage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("to "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"recipient@example.org"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmessage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cc "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Another User <another@example.net>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmessage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"this is the plain message text"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmessage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"this is html text <a href=\\"http://vertx.io\\">vertx.io</a>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Attachments can be created by the MailAttachment object using data\nstored in a Buffer, this supports base64 attachments.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Buffer "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vertx/core"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" attachment "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MailAttachment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nattachment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contentType "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/plain"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nattachment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("buffer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"attachment file"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmessage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attachment "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" attachment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v('When using inline attachments (usually images), it is possible to\nreference the images within a html message to display html with the\nimages included in the mail. Images can be referenced as <img\nsrc="cid:contentid@domain"> in the html text, the corresponding image\nhas Disposition: inline and the Content-ID header as\n"<contentid@domain>". Please note that RFC 2392 requires Content-ID\nvalues to be structured like a Message-ID with angle brackets and a\nlocal and domain part using URL compatible encoding. None of this is not\nenforced and most mail clients supports IDs without angle brackets or\nwithout domain part, the best practice is to use the strict format. A\nvalid example for a Content-ID value is\n"<'),a("a",{attrs:{href:"mailto:filename%201.jpg@example.org"}},[t._v("filename 1.jpg@example.org")]),t._v('>"')]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Buffer "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vertx/core"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" attachment "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MailAttachment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nattachment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contentType "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image/jpeg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nattachment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("buffer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image data"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nattachment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("disposition "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"inline"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nattachment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contentId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<image1@example.com>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmessage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("inlineAttachment "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" attachment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("When sending the mail, you can provide a AsyncResult<MailResult>\nhandler that will be called when the send operation is finished or it\nfailed.")]),t._v(" "),a("p",[t._v("A mail is sent as follows:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("mailClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendMail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("succeeded")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cause")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h1",{attrs:{id:"mail-client-data-objects"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mail-client-data-objects"}},[t._v("#")]),t._v(" Mail-client data objects")]),t._v(" "),a("h2",{attrs:{id:"mailmessage-properties"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mailmessage-properties"}},[t._v("#")]),t._v(" MailMessage properties")]),t._v(" "),a("p",[t._v("Email fields are Strings using the common formats for email with or\nwithout real name")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("username@example.com")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("username@example.com (Firstname Lastname)")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("Firstname Lastname <username@example.com>")])])])]),t._v(" "),a("p",[t._v("The MailMessage object has the following properties")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("from")]),t._v(" String representing the From address and the MAIL FROM field")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("to")]),t._v(" String or list of String representing the To addresses and the\nRCPT TO fields")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("cc")]),t._v(" same as to")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("bcc")]),t._v(" same as to")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("bounceAddress")]),t._v(" String representing the error address (MAIL FROM),\nif not set from is used")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("text")]),t._v(" String representing the text/plain part of the mail")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("html")]),t._v(" String representing the text/html part of the mail")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("attachment")]),t._v(" MailAttachment or list of MailAttachment attachments of\nthe message")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("inlineAttachment")]),t._v(" MailAttachment or list of MailAttachment of\ninline attachments of the message (usually images)")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("headers")]),t._v(" MultiMap representing headers to be added in addition to\nthe headers necessary for the MIME Message")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("fixedHeaders")]),t._v(" boolean if true, only the headers provided as headers\nproperty will be set in the generated message")])])]),t._v(" "),a("p",[t._v("the last two properties allow manipulating the generate messages with\ncustom headers, e.g. providing a message-id chosen by the calling\nprogram or setting different headers than would be generated by default.\nUnless you know what you are doing, this may generate invalid messages.")]),t._v(" "),a("h2",{attrs:{id:"mailattachment-properties"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mailattachment-properties"}},[t._v("#")]),t._v(" MailAttachment properties")]),t._v(" "),a("p",[t._v("The MailAttachment object has the following properties")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("data")]),t._v(" Buffer containing the binary data of the attachment")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("contentType")]),t._v(' String of the Content-Type of the attachment (e.g.\ntext/plain or text/plain; charset="UTF8", default is\napplication/octet-stream)')])]),t._v(" "),a("li",[a("p",[a("code",[t._v("description")]),t._v(" String describing the attachment (this is put in the\ndescription header of the attachment), optional")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("disposition")]),t._v(' String describing the disposition of the attachment\n(this is either "inline" or "attachment", default is attachment)')])]),t._v(" "),a("li",[a("p",[a("code",[t._v("name")]),t._v(" String filename of the attachment (this is put into the\ndisposition and in the Content-Type headers of the attachment),\noptional")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("contentId")]),t._v(" String describing the Content-Id of the attachment (this\nis used to identify inline images), optional")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("headers")]),t._v(" MultiMap of headers for the attachment in addition to the\ndefault ones, optional")])])]),t._v(" "),a("h2",{attrs:{id:"mailconfig-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mailconfig-options"}},[t._v("#")]),t._v(" MailConfig options")]),t._v(" "),a("p",[t._v("The configuration has the following properties")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("hostname")]),t._v(" the hostname of the smtp server to connect to (default is\nlocalhost)")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("port")]),t._v(" the port of the smtp server to connect to (default is 25)")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("startTLS")]),t._v(" StartTLSOptions either DISABLED, OPTIONAL or REQUIRED,\ndefault is OPTIONAL")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("login")]),t._v(" LoginOption either DISABLED, NONE or REQUIRED, default is\nNONE")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("username")]),t._v(" String of the username to be used for login (required\nonly when LoginOption is REQUIRED)")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("password")]),t._v(" String of the password to be used for login (required\nonly when LoginOption is REQUIRED)")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("ssl")]),t._v(" boolean whether to use ssl on connect to the mail server\n(default is false), set this to use a port 465 ssl connection\n(default is false)")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("ehloHostname")]),t._v(" String to used in EHLO and for creating the\nmessage-id, if not set, the own hostname will be used, which may not\nbe a good choice if it doesn’t contain a FQDN or is localhost\n(optional)")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("authMethods")]),t._v(" String space separated list of allowed auth methods,\nthis can be used to disallow some auth methods or define one\nrequired auth method (optional)")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("keepAlive")]),t._v(" boolean if connection pooling is enabled (default is\ntrue)")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("maxPoolSize")]),t._v(" int max number of open connections kept in the pool or\nto be opened at one time (regardless if pooling is enabled or not),\ndefault is 10")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("trustAll")]),t._v(" boolean whether to accept all certs from the server\n(default is false)")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("keyStore")]),t._v(" String the key store filename, this can be used to trust\na server cert that is custom generated (optional)")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("keyStorePassword")]),t._v(" String password used to decrypt the key store\n(optional)")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("allowRcptErrors")]),t._v(" boolean if true, sending continues if a recipient\naddress is not accepted and the mail will be sent if at least one\naddress is accepted (default false)")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("disableEsmtp")]),t._v(" boolean if true, ESMTP-related commands will not be\nused (set if your smtp server doesn’t even give a proper error\nresponse code for the EHLO command) (default false)")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("userAgent")]),t._v(" String represents the Mail User Agent(MUA) name used to\ngenerate email boundaries for multipart emails and message-id,\ndefault is "),a("code",[t._v("vertxmail")]),t._v(".")])])]),t._v(" "),a("h2",{attrs:{id:"mailresult-object"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mailresult-object"}},[t._v("#")]),t._v(" MailResult object")]),t._v(" "),a("p",[t._v("The MailResult object has the following members")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("messageID")]),t._v(" the Message-ID of the generated mail")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("recipients")]),t._v(" the list of recipients the mail was sent to (if\nallowRcptErrors is true, this may be fewer than the intended\nrecipients)")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);